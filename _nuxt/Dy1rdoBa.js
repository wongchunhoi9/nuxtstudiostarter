import{B as q,x as z,C as A,b as w,D as v,e as d,f as l,i as s,g as y,t as i,E as o,z as b,F as m,G as x,n as C,H as D,I as F,J as P,w as T,h as E,K as I}from"./D9_jcJHk.js";import{_ as L}from"./B68VwcRf.js";import{u as U}from"./C_zK1X3U.js";import{q as j}from"./Bw4W2j7F.js";import{_ as G}from"./DlAUqK2U.js";const H={class:"flex flex-col md:flex-row"},J={key:0,class:"ml-2 text-sm text-gray-500"},K={key:0},O={key:0},R={class:"flex gap-2 flex-wrap md:block"},Y=["onClick"],Q={class:"mt-4 sticky top-0 bg-white z-10"},W={class:"block mb-2"},X={class:"block"},Z={class:"w-full md:w-3/4 md:p-4 grid grid-cols-1 md:grid-cols-2 gap-4"},tt={class:"text-xl font-bold mb-2"},et={class:"mb-2"},st={class:"article-tag gap-2 flex flex-wrap mb-2"},ot={class:"text-sm text-gray-500"},at=q({__name:"index",async setup(lt){let f,h;const $=z(),{data:_}=([f,h]=A(()=>U($.path,()=>j("blog").order("date","DESC").all(),"$qMc483posa")),f=await f,h(),f),r=w([]),a=w({from:null,to:null}),g=w(!1),B=v(()=>{const n=(_.value??[]).flatMap(t=>t.tags||[]);return[...new Set(n)]}),S=v(()=>_.value?(_.value??[]).filter(t=>{if(!t.tags||!Array.isArray(t.tags))return console.warn("Post is missing tags or tags is not an array:",t),!1;const u=!r.value.length||t.tags.some(e=>r.value.includes(e)),c=(!a.value.from||new Date(t.date)>=new Date(a.value.from))&&(!a.value.to||new Date(t.date)<=new Date(a.value.to));return u&&c}):(console.warn("allPosts.value is undefined or null"),[]));function M(n){const t=new Date(n),u=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0");return`${u}-${c}-${e}`}const N=n=>{r.value.includes(n)?r.value=r.value.filter(t=>t!==n):r.value.push(n)},k=()=>{g.value=!g.value};return v(()=>{const n=r.value.length,t=a.value.from||a.value.to?1:0,u=n+t;return u>0?`(${u} active)`:""}),(n,t)=>{const u=I,c=L;return l(),d(m,null,[t[8]||(t[8]=s("h1",{class:"text-4xl mb-8 font-black"}," Blog ",-1)),s("div",H,[s("button",{class:"md:hidden p-2 bg-gray-100 text-gray-700 rounded mb-4",onClick:k},[s("span",null,i(o(g)?"Close Filters":" Filters"),1),o(r).length||o(a).from||o(a).to?(l(),d("span",J,[t[2]||(t[2]=b(" : ")),(l(!0),d(m,null,x(o(r),(e,p)=>(l(),d("span",{key:e},[b(i(e),1),p<o(r).length-1?(l(),d("span",K,", ")):y("",!0)]))),128)),o(a).from||o(a).to?(l(),d("span",O,i(o(a).from?`From: ${o(a).from}`:"")+" "+i(o(a).to?`To: ${o(a).to}`:""),1)):y("",!0)])):y("",!0)]),s("aside",{class:C([["fixed inset-y-0 left-0 bg-white z-50 p-4 transform transition-transform md:relative md:translate-x-0 md:w-1/4 border-b md:border-b-0 md:border-r border-gray-300",o(g)?"translate-x-0":"-translate-x-full"],"w-2/3 md:w-1/4 md:sticky md:top-0 md:h-screen md:overflow-y-auto"])},[s("button",{class:"md:hidden absolute top-4 right-4 p-2 text-gray-700 hover:text-black",onClick:k},t[3]||(t[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])),t[7]||(t[7]=s("h3",{class:"font-bold text-gray-500 mb-4"},"Filters",-1)),s("div",R,[(l(!0),d(m,null,x(o(B),e=>(l(),d("div",{key:e,class:"whitespace-nowrap py-1"},[s("span",{class:C(["p-2 rounded cursor-pointer",o(r).includes(e)?"bg-greenled text-black font-bold shadow-xl ":"text-sm bg-gray-50 text-gray-500 hover:bg-relayorangelight"]),onClick:p=>N(e)},i(e),11,Y)]))),128))]),s("div",Q,[t[6]||(t[6]=s("h4",{class:"font-semibold mb-2"},"Date",-1)),s("label",W,[t[4]||(t[4]=b(" From: ")),D(s("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>o(a).from=e),class:"border rounded p-1 w-full"},null,512),[[F,o(a).from]])]),s("label",X,[t[5]||(t[5]=b(" To: ")),D(s("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>o(a).to=e),class:"border rounded p-1 w-full"},null,512),[[F,o(a).to]])])])],2),s("div",Z,[(l(!0),d(m,null,x(o(S),e=>(l(),P(c,{key:e.path,to:e.path,class:"block mb-6"},{default:T(()=>[E(u,{src:`${e.img}`,alt:e.title,quality:"50",width:"500",class:"w-full inset-0 bg-cover bg-center z-0 mb-2"},null,8,["src","alt"]),s("h2",tt,i(e.title),1),s("p",et,i(e.description),1),s("div",st,[(l(!0),d(m,null,x(e.tags,(p,V)=>(l(),d("div",{key:V,class:"bg-gray-50 text-sm px-2 py-1 rounded"},i(p),1))),128))]),s("p",ot,i(M(e.date)),1)]),_:2},1032,["to"]))),128))])])],64)}}}),ct=G(at,[["__scopeId","data-v-3845df88"]]);export{ct as default};
